{"ast":null,"code":"import _toConsumableArray from\"C:/Users/gonca/Documents/Curso/MDM/DW/solo_project/webdev-solo-project-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/gonca/Documents/Curso/MDM/DW/solo_project/webdev-solo-project-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useOnDraw}from'./Hooks';import{useState,useEffect}from'react';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PatternDraw=function PatternDraw(_ref){var width=_ref.width,height=_ref.height;var _useOnDraw=useOnDraw(onDraw),setCanvasRef=_useOnDraw.setCanvasRef,onCanvasMouseDown=_useOnDraw.onCanvasMouseDown;var _useState=useState('#FF0000'),_useState2=_slicedToArray(_useState,2),currentColor=_useState2[0],setCurrentColor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),drawings=_useState4[0],setDrawings=_useState4[1];// State to store drawings\nuseEffect(function(){// Load saved drawings from localStorage when the component mounts\nvar savedDrawings=JSON.parse(localStorage.getItem('drawings'));if(savedDrawings){setDrawings(savedDrawings);}clearCanvas();},[]);function onDraw(ctx,point,prevPoint){drawLine(prevPoint,point,ctx,currentColor,30);}function drawLine(start,end,ctx,color,width){var _start;start=(_start=start)!==null&&_start!==void 0?_start:end;ctx.beginPath();ctx.lineWidth=width;ctx.strokeStyle=color;ctx.moveTo(start.x,start.y);ctx.lineTo(end.x,end.y);ctx.stroke();ctx.fillStyle=color;ctx.beginPath();ctx.arc(start.x,start.y,2,0,2*Math.PI);ctx.fill();}function clearCanvas(){var canvas=document.querySelector('canvas');var ctx=canvas.getContext('2d');ctx.fillStyle='#fffffc';// Set to white\nctx.fillRect(0,0,canvas.width,canvas.height);}function changeColor(newColor){setCurrentColor(newColor);}function deleteDrawing(index){// Remove the drawing at the specified index from the array\nvar updatedDrawings=_toConsumableArray(drawings);updatedDrawings.splice(index,1);setDrawings(updatedDrawings);// Update localStorage to reflect the changes\nlocalStorage.setItem('drawings',JSON.stringify(updatedDrawings));}function saveDrawing(){var canvas=document.querySelector('canvas');// Get the canvas element\nif(canvas){var svgData=canvas.toDataURL('image/svg+xml');var updatedDrawings=[].concat(_toConsumableArray(drawings),[svgData]);if(updatedDrawings.length>2){// If there are more than 2 drawings, remove the oldest one\nupdatedDrawings.shift();}setDrawings(updatedDrawings);// Save the updated drawings to localStorage\nlocalStorage.setItem('drawings',JSON.stringify(updatedDrawings));clearCanvas();}}return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"canvas\",{width:width,height:height,onMouseDown:onCanvasMouseDown,ref:setCanvasRef}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:clearCanvas,children:\"clear\"}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:saveDrawing,children:\"add\"}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:function onClick(){return changeColor('#ff312e');},children:\"red\"}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:function onClick(){return changeColor('#688e26');},children:\"green\"}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:function onClick(){return changeColor('#008dd5');},children:\"blue\"}),/*#__PURE__*/_jsx(\"button\",{className:\"canvas-button\",onClick:function onClick(){return changeColor('#111111');},children:\"black\"})]}),/*#__PURE__*/_jsx(\"div\",{children:drawings.map(function(drawing,index){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(\"img\",{className:\"saved-patterns\",src:drawing,alt:\"Saved Drawing \".concat(index),onClick:function onClick(){return deleteDrawing(index);}})},index);})})]});};export default PatternDraw;","map":{"version":3,"names":["useOnDraw","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","PatternDraw","_ref","width","height","_useOnDraw","onDraw","setCanvasRef","onCanvasMouseDown","_useState","_useState2","_slicedToArray","currentColor","setCurrentColor","_useState3","_useState4","drawings","setDrawings","savedDrawings","JSON","parse","localStorage","getItem","clearCanvas","ctx","point","prevPoint","drawLine","start","end","color","_start","beginPath","lineWidth","strokeStyle","moveTo","x","y","lineTo","stroke","fillStyle","arc","Math","PI","fill","canvas","document","querySelector","getContext","fillRect","changeColor","newColor","deleteDrawing","index","updatedDrawings","_toConsumableArray","splice","setItem","stringify","saveDrawing","svgData","toDataURL","concat","length","shift","style","display","children","onMouseDown","ref","className","onClick","map","drawing","alignItems","src","alt"],"sources":["C:/Users/gonca/Documents/Curso/MDM/DW/solo_project/webdev-solo-project-app/src/Component/PatternDraw.js"],"sourcesContent":["import { useOnDraw } from './Hooks';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst PatternDraw = ({ width, height }) => {\r\n    const { setCanvasRef, onCanvasMouseDown } = useOnDraw(onDraw);\r\n    const [currentColor, setCurrentColor] = useState('#FF0000');\r\n    const [drawings, setDrawings] = useState([]); // State to store drawings\r\n\r\n    useEffect(() => {\r\n        // Load saved drawings from localStorage when the component mounts\r\n        const savedDrawings = JSON.parse(localStorage.getItem('drawings'));\r\n        if (savedDrawings) {\r\n            setDrawings(savedDrawings);\r\n        }\r\n\r\n        clearCanvas();\r\n    }, []);\r\n\r\n    function onDraw(ctx, point, prevPoint) {\r\n        drawLine(prevPoint, point, ctx, currentColor, 30);\r\n    }\r\n\r\n    function drawLine(start, end, ctx, color, width) {\r\n        start = start ?? end;\r\n        ctx.beginPath();\r\n        ctx.lineWidth = width;\r\n        ctx.strokeStyle = color;\r\n        ctx.moveTo(start.x, start.y);\r\n        ctx.lineTo(end.x, end.y);\r\n        ctx.stroke();\r\n\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        ctx.arc(start.x, start.y, 2, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n    }\r\n\r\n    function clearCanvas() {\r\n        const canvas = document.querySelector('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = '#fffffc'; // Set to white\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    function changeColor(newColor) {\r\n        setCurrentColor(newColor);\r\n    }\r\n\r\n    function deleteDrawing(index) {\r\n        // Remove the drawing at the specified index from the array\r\n        const updatedDrawings = [...drawings];\r\n        updatedDrawings.splice(index, 1);\r\n        setDrawings(updatedDrawings);\r\n\r\n        // Update localStorage to reflect the changes\r\n        localStorage.setItem('drawings', JSON.stringify(updatedDrawings));\r\n    }\r\n\r\n    function saveDrawing() {\r\n        const canvas = document.querySelector('canvas'); // Get the canvas element\r\n\r\n        if (canvas) {\r\n            const svgData = canvas.toDataURL('image/svg+xml');\r\n            const updatedDrawings = [...drawings, svgData];\r\n\r\n            if (updatedDrawings.length > 2) {\r\n                // If there are more than 2 drawings, remove the oldest one\r\n                updatedDrawings.shift();\r\n            }\r\n\r\n            setDrawings(updatedDrawings);\r\n\r\n            // Save the updated drawings to localStorage\r\n            localStorage.setItem('drawings', JSON.stringify(updatedDrawings));\r\n\r\n            clearCanvas();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{ display: 'flex' }}>\r\n            <div>\r\n                <canvas\r\n                    width={width}\r\n                    height={height}\r\n                    onMouseDown={onCanvasMouseDown}\r\n                    ref={setCanvasRef}\r\n                />\r\n                <button className=\"canvas-button\" onClick={clearCanvas}>\r\n                    clear\r\n                </button>\r\n                <button className=\"canvas-button\" onClick={saveDrawing}>\r\n                    add\r\n                </button>\r\n                <button className=\"canvas-button\" onClick={() => changeColor('#ff312e')}>\r\n                    red\r\n                </button>\r\n                <button className=\"canvas-button\" onClick={() => changeColor('#688e26')}>\r\n                    green\r\n                </button>\r\n                <button className=\"canvas-button\" onClick={() => changeColor('#008dd5')}>\r\n                    blue\r\n                </button>\r\n                <button className=\"canvas-button\" onClick={() => changeColor('#111111')}>\r\n                    black\r\n                </button>\r\n            </div>\r\n            <div>\r\n                {drawings.map((drawing, index) => (\r\n                    <div key={index} style={{ display: 'flex', alignItems: 'center' }}>\r\n                        <img\r\n                            className='saved-patterns'\r\n                            src={drawing}\r\n                            alt={`Saved Drawing ${index}`}\r\n                            onClick={() => deleteDrawing(index)}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PatternDraw;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}